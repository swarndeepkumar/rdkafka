"use strict";
var __cov_NuBuSCenqkV$aCnTj0OfTQ = (Function('return this'))();
if (!__cov_NuBuSCenqkV$aCnTj0OfTQ.__coverage__) { __cov_NuBuSCenqkV$aCnTj0OfTQ.__coverage__ = {}; }
__cov_NuBuSCenqkV$aCnTj0OfTQ = __cov_NuBuSCenqkV$aCnTj0OfTQ.__coverage__;
if (!(__cov_NuBuSCenqkV$aCnTj0OfTQ['producer.js'])) {
   __cov_NuBuSCenqkV$aCnTj0OfTQ['producer.js'] = {"path":"producer.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"(anonymous_1)","line":7,"loc":{"start":{"line":7,"column":14},"end":{"line":7,"column":38}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":16},"end":{"line":10,"column":40}}},"3":{"name":"(anonymous_3)","line":11,"loc":{"start":{"line":11,"column":32},"end":{"line":11,"column":51}}},"4":{"name":"(anonymous_4)","line":39,"loc":{"start":{"line":39,"column":28},"end":{"line":39,"column":42}}},"5":{"name":"(anonymous_5)","line":44,"loc":{"start":{"line":44,"column":30},"end":{"line":44,"column":44}}},"6":{"name":"(anonymous_6)","line":53,"loc":{"start":{"line":53,"column":34},"end":{"line":53,"column":56}}},"7":{"name":"(anonymous_7)","line":59,"loc":{"start":{"line":59,"column":24},"end":{"line":59,"column":38}}},"8":{"name":"(anonymous_8)","line":79,"loc":{"start":{"line":79,"column":31},"end":{"line":79,"column":42}}},"9":{"name":"(anonymous_9)","line":90,"loc":{"start":{"line":90,"column":31},"end":{"line":90,"column":45}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":31}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":42}},"4":{"start":{"line":6,"column":0},"end":{"line":101,"column":2}},"5":{"start":{"line":8,"column":2},"end":{"line":8,"column":46}},"6":{"start":{"line":11,"column":2},"end":{"line":99,"column":5}},"7":{"start":{"line":13,"column":3},"end":{"line":13,"column":33}},"8":{"start":{"line":14,"column":3},"end":{"line":15,"column":15}},"9":{"start":{"line":16,"column":3},"end":{"line":16,"column":63}},"10":{"start":{"line":19,"column":3},"end":{"line":37,"column":4}},"11":{"start":{"line":20,"column":4},"end":{"line":28,"column":5}},"12":{"start":{"line":22,"column":5},"end":{"line":27,"column":6}},"13":{"start":{"line":23,"column":6},"end":{"line":26,"column":9}},"14":{"start":{"line":31,"column":4},"end":{"line":36,"column":5}},"15":{"start":{"line":32,"column":5},"end":{"line":35,"column":8}},"16":{"start":{"line":39,"column":3},"end":{"line":41,"column":6}},"17":{"start":{"line":40,"column":5},"end":{"line":40,"column":22}},"18":{"start":{"line":44,"column":3},"end":{"line":47,"column":6}},"19":{"start":{"line":45,"column":4},"end":{"line":45,"column":41}},"20":{"start":{"line":46,"column":4},"end":{"line":46,"column":23}},"21":{"start":{"line":50,"column":3},"end":{"line":50,"column":19}},"22":{"start":{"line":53,"column":3},"end":{"line":56,"column":6}},"23":{"start":{"line":54,"column":4},"end":{"line":54,"column":62}},"24":{"start":{"line":55,"column":4},"end":{"line":55,"column":14}},"25":{"start":{"line":59,"column":3},"end":{"line":88,"column":6}},"26":{"start":{"line":60,"column":4},"end":{"line":60,"column":57}},"27":{"start":{"line":66,"column":4},"end":{"line":76,"column":5}},"28":{"start":{"line":67,"column":5},"end":{"line":70,"column":8}},"29":{"start":{"line":71,"column":5},"end":{"line":71,"column":51}},"30":{"start":{"line":72,"column":5},"end":{"line":72,"column":26}},"31":{"start":{"line":74,"column":5},"end":{"line":74,"column":24}},"32":{"start":{"line":75,"column":5},"end":{"line":75,"column":52}},"33":{"start":{"line":79,"column":4},"end":{"line":85,"column":13}},"34":{"start":{"line":80,"column":5},"end":{"line":80,"column":21}},"35":{"start":{"line":81,"column":5},"end":{"line":84,"column":6}},"36":{"start":{"line":82,"column":6},"end":{"line":82,"column":30}},"37":{"start":{"line":90,"column":3},"end":{"line":92,"column":6}},"38":{"start":{"line":91,"column":4},"end":{"line":91,"column":65}},"39":{"start":{"line":95,"column":3},"end":{"line":95,"column":22}},"40":{"start":{"line":103,"column":0},"end":{"line":103,"column":40}}},"branchMap":{"1":{"line":19,"type":"if","locations":[{"start":{"line":19,"column":3},"end":{"line":19,"column":3}},{"start":{"line":19,"column":3},"end":{"line":19,"column":3}}]},"2":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":5},"end":{"line":22,"column":5}},{"start":{"line":22,"column":5},"end":{"line":22,"column":5}}]},"3":{"line":22,"type":"binary-expr","locations":[{"start":{"line":22,"column":9},"end":{"line":22,"column":44}},{"start":{"line":22,"column":48},"end":{"line":22,"column":83}}]},"4":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":4},"end":{"line":31,"column":4}},{"start":{"line":31,"column":4},"end":{"line":31,"column":4}}]},"5":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":8},"end":{"line":31,"column":43}},{"start":{"line":31,"column":47},"end":{"line":31,"column":82}}]},"6":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":5},"end":{"line":81,"column":5}},{"start":{"line":81,"column":5},"end":{"line":81,"column":5}}]}}};
}
__cov_NuBuSCenqkV$aCnTj0OfTQ = __cov_NuBuSCenqkV$aCnTj0OfTQ['producer.js'];
__cov_NuBuSCenqkV$aCnTj0OfTQ.s['1']++;var config=require('config');__cov_NuBuSCenqkV$aCnTj0OfTQ.s['2']++;var kafka=require('node-rdkafka');__cov_NuBuSCenqkV$aCnTj0OfTQ.s['3']++;var authorize=require('./authorize.js');__cov_NuBuSCenqkV$aCnTj0OfTQ.s['4']++;var produceMessage={sendMessage:function(ID,name,msg){__cov_NuBuSCenqkV$aCnTj0OfTQ.f['1']++;__cov_NuBuSCenqkV$aCnTj0OfTQ.s['5']++;produceMessage.authorization(ID,name,msg);},authorization:function(ID,name,msg){__cov_NuBuSCenqkV$aCnTj0OfTQ.f['2']++;__cov_NuBuSCenqkV$aCnTj0OfTQ.s['6']++;authorize.authorize(ID,name,function(response){__cov_NuBuSCenqkV$aCnTj0OfTQ.f['3']++;__cov_NuBuSCenqkV$aCnTj0OfTQ.s['7']++;var message=JSON.parse(msg);__cov_NuBuSCenqkV$aCnTj0OfTQ.s['8']++;var topicName=[],permission;__cov_NuBuSCenqkV$aCnTj0OfTQ.s['9']++;var producer=new kafka.Producer(config.producer.settings);__cov_NuBuSCenqkV$aCnTj0OfTQ.s['10']++;if(response.message.length>1){__cov_NuBuSCenqkV$aCnTj0OfTQ.b['1'][0]++;__cov_NuBuSCenqkV$aCnTj0OfTQ.s['11']++;for(var i=0;i<response.message.length;i++){__cov_NuBuSCenqkV$aCnTj0OfTQ.s['12']++;if((__cov_NuBuSCenqkV$aCnTj0OfTQ.b['3'][0]++,response.message[i].Permission==0)||(__cov_NuBuSCenqkV$aCnTj0OfTQ.b['3'][1]++,response.message[i].Permission==2)){__cov_NuBuSCenqkV$aCnTj0OfTQ.b['2'][0]++;__cov_NuBuSCenqkV$aCnTj0OfTQ.s['13']++;topicName.push({topic:response.message[i].TopicName,messages:message.message});}else{__cov_NuBuSCenqkV$aCnTj0OfTQ.b['2'][1]++;}}}else{__cov_NuBuSCenqkV$aCnTj0OfTQ.b['1'][1]++;__cov_NuBuSCenqkV$aCnTj0OfTQ.s['14']++;if((__cov_NuBuSCenqkV$aCnTj0OfTQ.b['5'][0]++,response.message[0].Permission==0)||(__cov_NuBuSCenqkV$aCnTj0OfTQ.b['5'][1]++,response.message[0].Permission==2)){__cov_NuBuSCenqkV$aCnTj0OfTQ.b['4'][0]++;__cov_NuBuSCenqkV$aCnTj0OfTQ.s['15']++;topicName.push({topic:response.message[0].TopicName,messages:message.message});}else{__cov_NuBuSCenqkV$aCnTj0OfTQ.b['4'][1]++;}}__cov_NuBuSCenqkV$aCnTj0OfTQ.s['16']++;producer.on('event.log',function(log){__cov_NuBuSCenqkV$aCnTj0OfTQ.f['4']++;__cov_NuBuSCenqkV$aCnTj0OfTQ.s['17']++;console.log(log);});__cov_NuBuSCenqkV$aCnTj0OfTQ.s['18']++;producer.on('event.error',function(err){__cov_NuBuSCenqkV$aCnTj0OfTQ.f['5']++;__cov_NuBuSCenqkV$aCnTj0OfTQ.s['19']++;console.error('Error from producer');__cov_NuBuSCenqkV$aCnTj0OfTQ.s['20']++;console.error(err);});__cov_NuBuSCenqkV$aCnTj0OfTQ.s['21']++;var counter=0;__cov_NuBuSCenqkV$aCnTj0OfTQ.s['22']++;producer.on('delivery-report',function(err,report){__cov_NuBuSCenqkV$aCnTj0OfTQ.f['6']++;__cov_NuBuSCenqkV$aCnTj0OfTQ.s['23']++;console.log('delivery-report: '+JSON.stringify(report));__cov_NuBuSCenqkV$aCnTj0OfTQ.s['24']++;counter++;});__cov_NuBuSCenqkV$aCnTj0OfTQ.s['25']++;producer.on('ready',function(arg){__cov_NuBuSCenqkV$aCnTj0OfTQ.f['7']++;__cov_NuBuSCenqkV$aCnTj0OfTQ.s['26']++;console.log('producer ready.'+JSON.stringify(arg));__cov_NuBuSCenqkV$aCnTj0OfTQ.s['27']++;for(var i=0;i<topicName.length;i++){__cov_NuBuSCenqkV$aCnTj0OfTQ.s['28']++;var topic=producer.Topic(topicName[i].topic,{'request.required.acks':1});__cov_NuBuSCenqkV$aCnTj0OfTQ.s['29']++;var value=new Buffer(topicName[i].messages);__cov_NuBuSCenqkV$aCnTj0OfTQ.s['30']++;var key='key-'+i;__cov_NuBuSCenqkV$aCnTj0OfTQ.s['31']++;var partition=-1;__cov_NuBuSCenqkV$aCnTj0OfTQ.s['32']++;producer.produce(topic,partition,value,key);}__cov_NuBuSCenqkV$aCnTj0OfTQ.s['33']++;var pollLoop=setInterval(function(){__cov_NuBuSCenqkV$aCnTj0OfTQ.f['8']++;__cov_NuBuSCenqkV$aCnTj0OfTQ.s['34']++;producer.poll();__cov_NuBuSCenqkV$aCnTj0OfTQ.s['35']++;if(counter===topicName.length){__cov_NuBuSCenqkV$aCnTj0OfTQ.b['6'][0]++;__cov_NuBuSCenqkV$aCnTj0OfTQ.s['36']++;clearInterval(pollLoop);}else{__cov_NuBuSCenqkV$aCnTj0OfTQ.b['6'][1]++;}},1000);});__cov_NuBuSCenqkV$aCnTj0OfTQ.s['37']++;producer.on('disconnected',function(arg){__cov_NuBuSCenqkV$aCnTj0OfTQ.f['9']++;__cov_NuBuSCenqkV$aCnTj0OfTQ.s['38']++;console.log('producer disconnected. '+JSON.stringify(arg));});__cov_NuBuSCenqkV$aCnTj0OfTQ.s['39']++;producer.connect();});}};__cov_NuBuSCenqkV$aCnTj0OfTQ.s['40']++;exports.produceMessage=produceMessage;
